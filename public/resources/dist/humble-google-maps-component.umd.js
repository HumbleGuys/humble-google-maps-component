(function(s){typeof define=="function"&&define.amd?define(s):s()})(function(){"use strict";const s="",a="gmapsCallback";let r=!1,l,c;const d=new Promise((o,t)=>{l=o,c=t});function h(o){if(r)return d;r=!0,window[a]=()=>l(window.google);const t=document.createElement("script");return t.async=!0,t.defer=!0,t.src=`https://maps.googleapis.com/maps/api/js?key=${o}&callback=${a}`,t.onerror=c,document.querySelector("head").appendChild(t),d}const p=(o,t)=>{let e;return function(...i){clearTimeout(e),e=setTimeout(()=>o.apply(this,i),t)}},m=({apiKey:o,zoom:t})=>({apiKey:o,zoom:t,coordinates:[],markers:[],google:null,map:null,listenerHandler:null,openInfoWindow:!1,async init(){this.google=await h(this.apiKey),this.initMap(),this.listenerHandler=this.google.maps.event.addDomListener(window,"resize",p(()=>this.handleRezise(),250))},initMap(){this.setCoordinates(),this.map=this.createMap(),this.markers=this.createMarkers(),this.coordinates.length>1&&this.fitAllMarkers()},setCoordinates(){const e=Array.from(this.$el.querySelectorAll(".googleMaps__marker"));this.coordinates=e.map(function(i){var n;return{lat:Number(i.dataset.lat),lng:Number(i.dataset.lng),icon:i.dataset.icon,iconWidth:Number(i.dataset.iconWidth),iconHeight:Number(i.dataset.iconHeight),infoWindow:(n=i.querySelector(".infoWindow"))==null?void 0:n.innerHTML}})},createMap(){return new this.google.maps.Map(this.$el,{mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,zoomControl:!1,center:this.coordinates[0],zoom:this.zoom})},createMarkers(){return this.coordinates.map(e=>{const i=new this.google.maps.Marker({position:e,animation:this.google.maps.Animation.DROP,map:this.map,icon:this.getIcon(e)});return e.infoWindow&&this.initInfoWindow(i,e.infoWindow),i})},initInfoWindow(e,i){const n=new google.maps.InfoWindow({content:i});return e.addListener("click",()=>{this.openInfoWindow&&this.openInfoWindow.close(),this.openInfoWindow=n,n.open({anchor:e,map:this.map,shouldFocus:!1})}),e},getIcon(e){const i=this.getIconSize(e);return{url:e.icon,size:i,scaledSize:i}},getIconSize(e){const i=window.innerWidth;let n=1;return i<600?n=.8:i<1030&&(n=.9),new this.google.maps.Size(e.iconWidth*n,e.iconHeight*n)},fitAllMarkers(){const e=new this.google.maps.LatLngBounds;this.markers.forEach(i=>{e.extend(i.position)}),this.map.fitBounds(e)},handleRezise(){this.resizeMarkers(),this.coordinates.length>1?this.fitAllMarkers():this.centerMap()},centerMap(){this.map.panTo(this.coordinates[0])},resizeMarkers(){const e=this.getIcon();this.markers.forEach(i=>{i.setIcon(e)})}});document.addEventListener("alpine:init",()=>{window.Alpine.data("googleMaps",m)})});
